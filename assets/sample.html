<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aura ‚Äî Your Personal Assistant</title>
<link href="https://fonts.googleapis.com/css2?family=Literata:ital,opsz,wght@0,7..72,300;0,7..72,400;0,7..72,500;1,7..72,300;1,7..72,400&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  /* ===== DESIGN TOKENS ===== */
  :root {
    --bg-primary: #FAF8F5;
    --bg-secondary: #F3F0EB;
    --bg-chat: #FFFFFF;
    --bg-nav: #36332E;
    --bg-nav-hover: rgba(123, 158, 135, 0.10);
    --bg-nav-active: rgba(123, 158, 135, 0.16);
    --surface-warm: #F0EDE8;
    --surface-assistant: #F7F5F1;
    --accent-sage: #7B9E87;
    --accent-sage-soft: #A8C5B2;
    --accent-sage-deep: #5C8068;
    --accent-sage-glow: rgba(123, 158, 135, 0.15);
    --accent-warm: #C4956A;
    --accent-warm-soft: #D4A97D;
    --text-primary: #2C2A27;
    --text-secondary: #6B6660;
    --text-tertiary: #9E9891;
    --text-nav: rgba(250, 248, 245, 0.50);
    --text-nav-active: rgba(250, 248, 245, 0.92);
    --text-nav-label: rgba(250, 248, 245, 0.30);
    --text-inverse: #FAF8F5;
    --border-soft: rgba(44, 42, 39, 0.06);
    --border-medium: rgba(44, 42, 39, 0.10);
    --border-nav: rgba(250, 248, 245, 0.07);
    --shadow-soft: 0 1px 3px rgba(44, 42, 39, 0.04);
    --shadow-medium: 0 4px 20px rgba(44, 42, 39, 0.06);
    --shadow-float: 0 8px 40px rgba(44, 42, 39, 0.10);
    --radius-sm: 12px;
    --radius-md: 18px;
    --radius-lg: 24px;
    --radius-full: 9999px;
    --font-serif: 'Literata', Georgia, serif;
    --font-sans: 'DM Sans', -apple-system, sans-serif;
    --ease-gentle: cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
    --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    --nav-width-expanded: 220px;
    --nav-width-collapsed: 68px;
    --panel-width: 260px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  html, body {
    height: 100%;
    background: var(--bg-nav);
    font-family: var(--font-sans);
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
    overflow: hidden;
  }

  /* ===== APP SHELL ===== */
  .app {
    display: flex;
    height: 100vh;
  }

  /* ===== LEFT NAV (App-level) ===== */
  .app-nav {
    width: var(--nav-width-expanded);
    background: var(--bg-nav);
    display: flex;
    flex-direction: column;
    padding: 16px 12px;
    flex-shrink: 0;
    transition: width 0.35s var(--ease-smooth);
    z-index: 10;
    position: relative;
    overflow: hidden;
  }

  .app-nav.collapsed { width: var(--nav-width-collapsed); }

  /* Collapse toggle */
  .nav-collapse-btn {
    position: absolute;
    top: 20px;
    right: 12px;
    width: 28px;
    height: 28px;
    border-radius: 8px;
    border: none;
    background: transparent;
    color: var(--text-nav);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    opacity: 0;
    z-index: 2;
  }

  .app-nav:hover .nav-collapse-btn { opacity: 1; }
  .app-nav.collapsed .nav-collapse-btn { opacity: 1; right: 20px; }
  .nav-collapse-btn:hover { background: var(--bg-nav-hover); color: var(--text-nav-active); }
  .nav-collapse-btn svg { width: 16px; height: 16px; transition: transform 0.35s var(--ease-smooth); }
  .app-nav.collapsed .nav-collapse-btn svg { transform: rotate(180deg); }

  /* Brand */
  .nav-brand {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 4px 8px;
    margin-bottom: 28px;
    min-height: 40px;
  }

  .nav-brand-mark {
    width: 36px;
    height: 36px;
    border-radius: 12px;
    background: linear-gradient(135deg, var(--accent-sage) 0%, var(--accent-sage-deep) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    box-shadow: 0 2px 10px rgba(123, 158, 135, 0.3);
  }

  .nav-brand-mark svg { width: 18px; height: 18px; }

  .nav-brand-text {
    font-family: var(--font-serif);
    font-size: 19px;
    font-weight: 500;
    color: var(--text-nav-active);
    letter-spacing: -0.01em;
    white-space: nowrap;
    opacity: 1;
    transition: opacity 0.2s var(--ease-smooth);
  }

  .app-nav.collapsed .nav-brand-text { opacity: 0; pointer-events: none; }

  /* Nav items */
  .nav-items { flex: 1; display: flex; flex-direction: column; gap: 2px; }

  .nav-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 11px 12px;
    border-radius: 10px;
    cursor: pointer;
    color: var(--text-nav);
    text-decoration: none;
    transition: all 0.2s var(--ease-gentle);
    position: relative;
    white-space: nowrap;
    overflow: hidden;
  }

  .nav-item:hover { background: var(--bg-nav-hover); color: var(--text-nav-active); }

  .nav-item.active {
    background: var(--bg-nav-active);
    color: var(--text-nav-active);
  }

  .nav-item.active::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 20px;
    border-radius: 0 3px 3px 0;
    background: var(--accent-sage-soft);
    box-shadow: 0 0 10px rgba(123, 158, 135, 0.35);
  }

  .nav-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .nav-icon svg { width: 20px; height: 20px; stroke: currentColor; fill: none; stroke-width: 1.6; stroke-linecap: round; stroke-linejoin: round; }

  .nav-label {
    font-size: 14px;
    font-weight: 400;
    font-family: var(--font-serif);
    opacity: 1;
    transition: opacity 0.2s var(--ease-smooth);
  }

  .app-nav.collapsed .nav-label { opacity: 0; pointer-events: none; }

  .nav-badge {
    margin-left: auto;
    background: var(--accent-sage);
    color: white;
    font-size: 11px;
    font-weight: 600;
    padding: 1px 7px;
    border-radius: var(--radius-full);
    opacity: 1;
    transition: opacity 0.2s;
  }

  .app-nav.collapsed .nav-badge { opacity: 0; }

  .nav-separator {
    height: 1px;
    background: var(--border-nav);
    margin: 12px 8px;
  }

  .nav-section-label {
    font-size: 10px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-nav-label);
    padding: 8px 12px 4px;
    font-family: var(--font-sans);
    opacity: 1;
    transition: opacity 0.2s;
  }

  .app-nav.collapsed .nav-section-label { opacity: 0; }

  /* Profile in nav footer */
  .nav-footer {
    border-top: 1px solid var(--border-nav);
    padding-top: 12px;
    margin-top: 8px;
  }

  .nav-profile {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 8px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
    overflow: hidden;
  }

  .nav-profile:hover { background: var(--bg-nav-hover); }

  .nav-profile-avatar {
    width: 34px;
    height: 34px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-warm), var(--accent-warm-soft));
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--font-serif);
    font-size: 14px;
    font-weight: 500;
    color: white;
    flex-shrink: 0;
  }

  .nav-profile-info {
    min-width: 0;
    opacity: 1;
    transition: opacity 0.2s;
  }

  .app-nav.collapsed .nav-profile-info { opacity: 0; pointer-events: none; }

  .nav-profile-name {
    font-size: 13px;
    font-weight: 500;
    font-family: var(--font-serif);
    color: var(--text-nav-active);
    white-space: nowrap;
  }

  .nav-profile-plan {
    font-size: 11px;
    color: var(--text-nav-label);
    white-space: nowrap;
  }

  /* ===== MAIN CONTENT AREA ===== */
  .main-content {
    flex: 1;
    display: flex;
    background: var(--bg-chat);
    border-radius: 14px 0 0 14px;
    overflow: hidden;
    box-shadow: -4px 0 30px rgba(0,0,0,0.12);
  }

  /* ===== CHAT PANEL (conversation history) ===== */
  .chat-panel {
    width: var(--panel-width);
    background: var(--bg-secondary);
    border-right: 1px solid var(--border-soft);
    display: flex;
    flex-direction: column;
    padding: 20px 14px;
    flex-shrink: 0;
    transition: width 0.3s var(--ease-smooth), padding 0.3s var(--ease-smooth), opacity 0.3s;
    overflow: hidden;
  }

  .chat-panel.hidden {
    width: 0;
    padding: 20px 0;
    opacity: 0;
    pointer-events: none;
  }

  .panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 6px;
    margin-bottom: 16px;
    min-height: 32px;
  }

  .panel-title {
    font-family: var(--font-serif);
    font-size: 15px;
    font-weight: 500;
    color: var(--text-primary);
    white-space: nowrap;
  }

  .panel-toggle-btn {
    width: 28px;
    height: 28px;
    border-radius: 8px;
    border: none;
    background: transparent;
    cursor: pointer;
    color: var(--text-tertiary);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }

  .panel-toggle-btn:hover { background: var(--surface-warm); color: var(--text-secondary); }
  .panel-toggle-btn svg { width: 16px; height: 16px; }

  .new-chat-btn {
    display: flex;
    align-items: center;
    gap: 9px;
    padding: 10px 14px;
    background: var(--bg-chat);
    border: 1px solid var(--border-medium);
    border-radius: var(--radius-sm);
    font-family: var(--font-sans);
    font-size: 13px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.25s var(--ease-gentle);
    margin-bottom: 20px;
    width: 100%;
    white-space: nowrap;
  }

  .new-chat-btn:hover {
    background: var(--bg-primary);
    border-color: var(--accent-sage-soft);
    color: var(--accent-sage-deep);
    box-shadow: var(--shadow-soft);
  }

  .new-chat-btn svg { width: 14px; height: 14px; opacity: 0.5; flex-shrink: 0; }

  .panel-section-label {
    font-size: 10px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-tertiary);
    padding: 0 8px;
    margin-bottom: 6px;
    white-space: nowrap;
  }

  .chat-list {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
  }

  .chat-list::-webkit-scrollbar { width: 3px; }
  .chat-list::-webkit-scrollbar-track { background: transparent; }
  .chat-list::-webkit-scrollbar-thumb { background: var(--border-medium); border-radius: 3px; }

  .chat-item {
    display: flex;
    align-items: center;
    gap: 9px;
    padding: 9px 10px;
    border-radius: 9px;
    cursor: pointer;
    transition: all 0.2s var(--ease-gentle);
    margin-bottom: 1px;
    white-space: nowrap;
    overflow: hidden;
  }

  .chat-item:hover { background: rgba(123, 158, 135, 0.06); }
  .chat-item.active { background: rgba(123, 158, 135, 0.10); }

  .chat-item .dot {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: var(--accent-sage-soft);
    flex-shrink: 0;
    opacity: 0.5;
  }

  .chat-item.active .dot { background: var(--accent-sage); opacity: 1; }

  .chat-item span {
    font-size: 13px;
    color: var(--text-secondary);
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .chat-item.active span { color: var(--text-primary); font-weight: 450; }

  /* ===== CHAT MAIN ===== */
  .chat-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-width: 0;
    position: relative;
  }

  /* Ambient background */
  .chat-main::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse at 65% 15%, rgba(123, 158, 135, 0.03) 0%, transparent 55%),
      radial-gradient(ellipse at 25% 85%, rgba(196, 149, 106, 0.02) 0%, transparent 45%);
    pointer-events: none;
    z-index: 0;
  }

  .chat-main > * { position: relative; z-index: 1; }

  /* Chat header */
  .chat-header {
    padding: 16px 28px;
    border-bottom: 1px solid var(--border-soft);
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-shrink: 0;
    backdrop-filter: blur(12px);
    background: rgba(255,255,255,0.85);
  }

  .header-left { display: flex; align-items: center; gap: 12px; }

  .panel-open-btn {
    width: 32px;
    height: 32px;
    border-radius: 9px;
    border: none;
    background: transparent;
    cursor: pointer;
    color: var(--text-tertiary);
    display: none;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }

  .panel-open-btn:hover { background: var(--surface-warm); color: var(--text-secondary); }
  .panel-open-btn svg { width: 18px; height: 18px; }
  .chat-panel.hidden ~ .chat-main .panel-open-btn { display: flex; }

  .assistant-presence {
    width: 38px;
    height: 38px;
    border-radius: 13px;
    background: linear-gradient(135deg, var(--accent-sage) 0%, var(--accent-sage-deep) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    flex-shrink: 0;
  }

  .assistant-presence svg { width: 18px; height: 18px; }

  .presence-dot {
    position: absolute;
    bottom: -1px;
    right: -1px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #6BBF7B;
    border: 2.5px solid var(--bg-chat);
    animation: breathe 3s ease-in-out infinite;
  }

  @keyframes breathe {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.15); opacity: 0.8; }
  }

  .header-info h2 {
    font-family: var(--font-serif);
    font-size: 15.5px;
    font-weight: 500;
    letter-spacing: -0.01em;
  }

  .header-info p {
    font-size: 12px;
    color: var(--text-tertiary);
    margin-top: 1px;
  }

  .header-actions { display: flex; gap: 2px; }

  .icon-btn {
    width: 34px;
    height: 34px;
    border-radius: 9px;
    border: none;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: var(--text-tertiary);
    transition: all 0.2s;
  }

  .icon-btn:hover { background: var(--surface-warm); color: var(--text-secondary); }
  .icon-btn svg { width: 17px; height: 17px; }

  /* Messages */
  .messages-container {
    flex: 1;
    overflow-y: auto;
    padding: 28px 32px;
    scroll-behavior: smooth;
  }

  .messages-container::-webkit-scrollbar { width: 4px; }
  .messages-container::-webkit-scrollbar-track { background: transparent; }
  .messages-container::-webkit-scrollbar-thumb { background: var(--border-medium); border-radius: 4px; }

  /* Welcome */
  .welcome {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    text-align: center;
    padding: 40px;
  }

  .welcome-orb {
    width: 72px;
    height: 72px;
    border-radius: 24px;
    background: linear-gradient(135deg, var(--accent-sage) 0%, var(--accent-sage-soft) 50%, #B8D4BF 100%);
    margin-bottom: 24px;
    animation: orbFloat 6s ease-in-out infinite, welcomeIn 0.8s var(--ease-gentle) 0.3s both;
    box-shadow: 0 8px 32px rgba(123, 158, 135, 0.2), inset 0 -4px 12px rgba(92, 128, 104, 0.15);
    position: relative;
    overflow: hidden;
  }

  .welcome-orb::after {
    content: '';
    position: absolute;
    top: 7px;
    left: 11px;
    width: 18px;
    height: 10px;
    background: rgba(255,255,255,0.3);
    border-radius: 50%;
    filter: blur(3px);
  }

  @keyframes orbFloat {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    33% { transform: translateY(-7px) rotate(1deg); }
    66% { transform: translateY(-2px) rotate(-1deg); }
  }

  @keyframes welcomeIn {
    from { opacity: 0; transform: translateY(14px) scale(0.92); }
    to { opacity: 1; transform: translateY(0) scale(1); }
  }

  .welcome h1 {
    font-family: var(--font-serif);
    font-size: 26px;
    font-weight: 400;
    letter-spacing: -0.02em;
    color: var(--text-primary);
    margin-bottom: 8px;
    opacity: 0;
    animation: welcomeIn 0.7s var(--ease-gentle) 0.5s forwards;
  }

  .welcome p {
    font-size: 14.5px;
    color: var(--text-tertiary);
    max-width: 360px;
    line-height: 1.6;
    opacity: 0;
    animation: welcomeIn 0.7s var(--ease-gentle) 0.65s forwards;
  }

  .suggestions {
    display: flex;
    flex-wrap: wrap;
    gap: 9px;
    margin-top: 28px;
    justify-content: center;
    max-width: 480px;
    opacity: 0;
    animation: welcomeIn 0.7s var(--ease-gentle) 0.8s forwards;
  }

  .suggestion-chip {
    padding: 9px 16px;
    border-radius: var(--radius-full);
    border: 1px solid var(--border-medium);
    background: var(--bg-chat);
    font-family: var(--font-sans);
    font-size: 13px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.3s var(--ease-gentle);
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .suggestion-chip:hover {
    border-color: var(--accent-sage-soft);
    background: rgba(123, 158, 135, 0.04);
    color: var(--accent-sage-deep);
    transform: translateY(-1px);
    box-shadow: var(--shadow-soft);
  }

  .chip-icon { font-size: 13px; }

  /* Messages */
  .message-group {
    display: flex;
    gap: 11px;
    margin-bottom: 22px;
    max-width: 660px;
    opacity: 0;
    animation: messageIn 0.45s var(--ease-gentle) forwards;
  }

  @keyframes messageIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .message-group.user { margin-left: auto; flex-direction: row-reverse; }

  .msg-avatar {
    width: 30px;
    height: 30px;
    border-radius: 10px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 2px;
  }

  .msg-avatar.assistant-av {
    background: linear-gradient(135deg, var(--accent-sage) 0%, var(--accent-sage-deep) 100%);
  }

  .msg-avatar.assistant-av svg { width: 14px; height: 14px; }

  .msg-avatar.user-av {
    background: linear-gradient(135deg, var(--accent-warm), var(--accent-warm-soft));
    font-family: var(--font-serif);
    font-size: 11px;
    font-weight: 500;
    color: white;
  }

  .msg-content { flex: 1; min-width: 0; }

  .msg-bubble {
    padding: 13px 17px;
    border-radius: var(--radius-md);
    font-size: 14px;
    line-height: 1.65;
    letter-spacing: 0.005em;
  }

  .msg-bubble.assistant-msg {
    background: var(--surface-assistant);
    color: var(--text-primary);
    border-bottom-left-radius: 6px;
    font-family: var(--font-serif);
    font-weight: 300;
  }

  .msg-bubble.user-msg {
    background: var(--accent-sage);
    color: var(--text-inverse);
    border-bottom-right-radius: 6px;
  }

  .msg-time {
    font-size: 10.5px;
    color: var(--text-tertiary);
    margin-top: 5px;
    padding: 0 4px;
  }

  .message-group.user .msg-time { text-align: right; }

  .msg-actions {
    display: flex;
    gap: 2px;
    margin-top: 3px;
    opacity: 0;
    transition: opacity 0.2s;
  }

  .message-group:hover .msg-actions { opacity: 1; }

  .msg-action-btn {
    width: 26px;
    height: 26px;
    border-radius: 7px;
    border: none;
    background: transparent;
    cursor: pointer;
    color: var(--text-tertiary);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
  }

  .msg-action-btn:hover { background: var(--surface-warm); color: var(--text-secondary); }
  .msg-action-btn svg { width: 13px; height: 13px; }

  /* Typing */
  .typing-indicator {
    display: flex;
    gap: 11px;
    align-items: flex-start;
    margin-bottom: 22px;
    max-width: 660px;
  }

  .typing-dots {
    display: flex;
    gap: 4px;
    padding: 15px 18px;
    background: var(--surface-assistant);
    border-radius: var(--radius-md);
    border-bottom-left-radius: 6px;
  }

  .typing-dots span {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--accent-sage-soft);
    animation: typingBounce 1.4s ease-in-out infinite;
  }

  .typing-dots span:nth-child(2) { animation-delay: 0.15s; }
  .typing-dots span:nth-child(3) { animation-delay: 0.3s; }

  @keyframes typingBounce {
    0%, 60%, 100% { transform: translateY(0); opacity: 0.35; }
    30% { transform: translateY(-5px); opacity: 1; }
  }

  /* ===== INPUT AREA ===== */
  .input-area {
    padding: 14px 28px 24px;
    flex-shrink: 0;
  }

  .input-wrapper {
    display: flex;
    align-items: flex-end;
    gap: 8px;
    background: var(--bg-primary);
    border: 1.5px solid var(--border-medium);
    border-radius: 20px;
    padding: 7px 7px 7px 18px;
    transition: all 0.3s var(--ease-gentle);
    box-shadow: var(--shadow-soft);
  }

  .input-wrapper:focus-within {
    border-color: var(--accent-sage-soft);
    box-shadow: 0 0 0 3px rgba(123, 158, 135, 0.08), var(--shadow-medium);
  }

  .input-wrapper textarea {
    flex: 1;
    border: none;
    background: transparent;
    font-family: var(--font-sans);
    font-size: 14px;
    color: var(--text-primary);
    resize: none;
    outline: none;
    padding: 7px 0;
    min-height: 22px;
    max-height: 120px;
    line-height: 1.5;
  }

  .input-wrapper textarea::placeholder { color: var(--text-tertiary); }

  .input-actions { display: flex; align-items: center; gap: 3px; }

  .attach-btn {
    width: 34px;
    height: 34px;
    border-radius: 10px;
    border: none;
    background: transparent;
    cursor: pointer;
    color: var(--text-tertiary);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }

  .attach-btn:hover { color: var(--text-secondary); background: var(--surface-warm); }
  .attach-btn svg { width: 17px; height: 17px; }

  .send-btn {
    width: 38px;
    height: 38px;
    border-radius: 13px;
    border: none;
    background: var(--border-medium);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s var(--ease-spring);
    flex-shrink: 0;
  }

  .send-btn.active {
    background: var(--accent-sage);
    box-shadow: 0 2px 8px rgba(123, 158, 135, 0.25);
  }

  .send-btn.active:hover {
    background: var(--accent-sage-deep);
    transform: scale(1.05);
    box-shadow: 0 4px 14px rgba(123, 158, 135, 0.3);
  }

  .send-btn:active { transform: scale(0.95); }
  .send-btn svg { width: 16px; height: 16px; }

  .input-hint {
    text-align: center;
    font-size: 11px;
    color: var(--text-tertiary);
    margin-top: 8px;
    opacity: 0.6;
  }

  /* ===== PAGE VIEWS (non-chat) ===== */
  .page-view {
    display: none;
    flex: 1;
    flex-direction: column;
    padding: 40px 48px;
    overflow-y: auto;
  }

  .page-view.active { display: flex; }

  .page-view.active > * {
    opacity: 0;
    animation: pageElementIn 0.6s var(--ease-gentle) forwards;
  }

  .page-view.active > *:nth-child(1) { animation-delay: 0.1s; }
  .page-view.active > *:nth-child(2) { animation-delay: 0.2s; }
  .page-view.active > *:nth-child(3) { animation-delay: 0.3s; }
  .page-view.active > *:nth-child(4) { animation-delay: 0.4s; }
  .page-view.active > *:nth-child(5) { animation-delay: 0.5s; }
  .page-view.active > *:nth-child(6) { animation-delay: 0.6s; }

  @keyframes pageElementIn {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .page-view h1 {
    font-family: var(--font-serif);
    font-size: 24px;
    font-weight: 400;
    margin-bottom: 6px;
  }

  .page-view .page-subtitle {
    font-size: 14px;
    color: var(--text-tertiary);
    margin-bottom: 32px;
  }

  .page-card {
    background: var(--bg-primary);
    border: 1px solid var(--border-soft);
    border-radius: var(--radius-md);
    padding: 24px;
    margin-bottom: 16px;
    transition: all 0.25s var(--ease-gentle);
  }

  .page-card:hover {
    box-shadow: var(--shadow-medium);
    transform: translateY(-1px);
  }

  .page-card h3 {
    font-family: var(--font-serif);
    font-size: 15px;
    font-weight: 500;
    margin-bottom: 4px;
  }

  .page-card p {
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.55;
  }

  .card-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 0;
    border-bottom: 1px solid var(--border-soft);
  }

  .card-row:last-child { border-bottom: none; }

  .card-row-label {
    font-size: 13.5px;
    color: var(--text-primary);
  }

  .card-row-value {
    font-size: 13px;
    color: var(--text-tertiary);
  }

  .toggle-track {
    width: 40px;
    height: 22px;
    border-radius: 11px;
    background: var(--border-medium);
    position: relative;
    cursor: pointer;
    transition: background 0.25s;
  }

  .toggle-track.on { background: var(--accent-sage); }

  .toggle-track::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: white;
    box-shadow: 0 1px 3px rgba(0,0,0,0.15);
    transition: transform 0.25s var(--ease-spring);
  }

  .toggle-track.on::after { transform: translateX(18px); }

  .connection-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 12px;
    margin-top: 8px;
  }

  .connection-card {
    background: var(--bg-primary);
    border: 1px solid var(--border-soft);
    border-radius: var(--radius-sm);
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    transition: all 0.25s var(--ease-gentle);
    text-align: center;
  }

  .connection-card:hover {
    border-color: var(--accent-sage-soft);
    box-shadow: var(--shadow-medium);
    transform: translateY(-2px);
  }

  .connection-card.connected { border-color: var(--accent-sage-soft); background: rgba(123, 158, 135, 0.03); }

  .connection-icon {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    background: var(--surface-warm);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
  }

  .connection-card.connected .connection-icon { background: var(--accent-sage-glow); }

  .connection-name {
    font-size: 13.5px;
    font-weight: 500;
    color: var(--text-primary);
  }

  .connection-status {
    font-size: 11px;
    color: var(--text-tertiary);
  }

  .connection-card.connected .connection-status { color: var(--accent-sage); }

  /* Quick stats for home */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 14px;
    margin-bottom: 28px;
  }

  .stat-card {
    background: var(--bg-primary);
    border: 1px solid var(--border-soft);
    border-radius: var(--radius-sm);
    padding: 20px;
    transition: all 0.25s var(--ease-gentle);
  }

  .stat-card:hover {
    box-shadow: var(--shadow-medium);
    transform: translateY(-2px);
  }

  .stat-value {
    font-family: var(--font-serif);
    font-size: 28px;
    font-weight: 400;
    color: var(--text-primary);
    letter-spacing: -0.02em;
  }

  .stat-label {
    font-size: 12px;
    color: var(--text-tertiary);
    margin-top: 2px;
  }

  /* Animations */
  .app-nav { animation: navIn 0.5s var(--ease-gentle) both; }
  .main-content { animation: contentIn 0.5s var(--ease-gentle) 0.1s both; }

  @keyframes navIn {
    from { opacity: 0; transform: translateX(-8px); }
    to { opacity: 1; transform: translateX(0); }
  }

  @keyframes contentIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Responsive */
  @media (max-width: 900px) {
    .app-nav { width: var(--nav-width-collapsed); }
    .app-nav .nav-label,
    .app-nav .nav-brand-text,
    .app-nav .nav-profile-info,
    .app-nav .nav-section-label,
    .app-nav .nav-badge { opacity: 0; pointer-events: none; }
    .app-nav .nav-collapse-btn { display: none; }
    .chat-panel { width: 0; padding: 20px 0; opacity: 0; pointer-events: none; }
    .panel-open-btn { display: flex !important; }
  }
</style>
</head>
<body>

<div class="app">

  <!-- ===== APP NAV ===== -->
  <nav class="app-nav" id="appNav">
    <button class="nav-collapse-btn" onclick="toggleNav()" title="Collapse">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="11 17 6 12 11 7"/><polyline points="18 17 13 12 18 7"/></svg>
    </button>

    <div class="nav-brand">
      <div class="nav-brand-mark">
        <svg viewBox="0 0 24 24" fill="none" stroke="#FAF8F5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 3c-3.3 0-6 2.7-6 6 0 2.1 1.1 4 2.7 5.1C7.1 15.5 6 17.6 6 20h12c0-2.4-1.1-4.5-2.7-5.9C16.9 13 18 11.1 18 9c0-3.3-2.7-6-6-6z"/>
        </svg>
      </div>
      <span class="nav-brand-text">Aura</span>
    </div>

    <div class="nav-items">
      <a class="nav-item" data-page="home" onclick="navigateTo('home')">
        <div class="nav-icon"><svg viewBox="0 0 24 24"><path d="M4 12C4 7.58 7.58 4 12 4s8 3.58 8 8-3.58 8-8 8-8-3.58-8-8z" fill="none" stroke="currentColor" stroke-width="1.6"/><circle cx="12" cy="12" r="3" fill="none" stroke="currentColor" stroke-width="1.6"/></svg></div>
        <span class="nav-label">Home</span>
      </a>
      <a class="nav-item active" data-page="chat" onclick="navigateTo('chat')">
        <div class="nav-icon"><svg viewBox="0 0 24 24"><path d="M12 21c-1.5 0-5.5-.8-7.5-3C2.5 15.8 2 13 2 11.5 2 6.8 6.5 3 12 3s10 3.8 10 8.5c0 1.5-.5 4.3-2.5 6.5-2 2.2-6 3-7.5 3z" fill="none" stroke="currentColor" stroke-width="1.6"/><circle cx="8.5" cy="11.5" r="1" fill="currentColor"/><circle cx="12" cy="11.5" r="1" fill="currentColor"/><circle cx="15.5" cy="11.5" r="1" fill="currentColor"/></svg></div>
        <span class="nav-label">Chat</span>
        <span class="nav-badge">3</span>
      </a>

      <div class="nav-separator"></div>
      <div class="nav-section-label">Settings</div>

      <a class="nav-item" data-page="preferences" onclick="navigateTo('preferences')">
        <div class="nav-icon"><svg viewBox="0 0 24 24"><path d="M12 15.5A3.5 3.5 0 1012 8.5a3.5 3.5 0 000 7z" fill="none" stroke="currentColor" stroke-width="1.6"/><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M4.93 19.07l1.41-1.41m11.32-11.32l1.41-1.41" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg></div>
        <span class="nav-label">Preferences</span>
      </a>
      <a class="nav-item" data-page="connections" onclick="navigateTo('connections')">
        <div class="nav-icon"><svg viewBox="0 0 24 24"><circle cx="6" cy="12" r="3" fill="none" stroke="currentColor" stroke-width="1.6"/><circle cx="18" cy="6" r="3" fill="none" stroke="currentColor" stroke-width="1.6"/><circle cx="18" cy="18" r="3" fill="none" stroke="currentColor" stroke-width="1.6"/><line x1="8.7" y1="10.7" x2="15.3" y2="7.3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/><line x1="8.7" y1="13.3" x2="15.3" y2="16.7" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg></div>
        <span class="nav-label">Connections</span>
      </a>
    </div>

    <div class="nav-footer">
      <div class="nav-profile" onclick="navigateTo('preferences')">
        <div class="nav-profile-avatar">I</div>
        <div class="nav-profile-info">
          <div class="nav-profile-name">Ifeanyi</div>
          <div class="nav-profile-plan">Pro Plan</div>
        </div>
      </div>
    </div>
  </nav>

  <!-- ===== MAIN CONTENT ===== -->
  <div class="main-content">

    <!-- HOME PAGE -->
    <div class="page-view" id="page-home">
      <h1>Welcome back, Ifeanyi</h1>
      <p class="page-subtitle">Here's a snapshot of your activity</p>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value">47</div>
          <div class="stat-label">Conversations this month</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">5</div>
          <div class="stat-label">Connected channels</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">12</div>
          <div class="stat-label">Tasks completed</div>
        </div>
      </div>

      <div class="page-card">
        <h3>Recent activity</h3>
        <div class="card-row">
          <span class="card-row-label">Morning planning session</span>
          <span class="card-row-value">2 hours ago</span>
        </div>
        <div class="card-row">
          <span class="card-row-label">Recipe ideas for dinner</span>
          <span class="card-row-value">Yesterday</span>
        </div>
        <div class="card-row">
          <span class="card-row-label">Travel plans ‚Äî Lisbon trip</span>
          <span class="card-row-value">2 days ago</span>
        </div>
      </div>

      <div class="page-card">
        <h3>Quick actions</h3>
        <p>Start a new chat, review your connections, or adjust your preferences from the sidebar.</p>
      </div>
    </div>

    <!-- PREFERENCES PAGE -->
    <div class="page-view" id="page-preferences">
      <h1>Preferences</h1>
      <p class="page-subtitle">Customize how Aura works for you</p>

      <div class="page-card">
        <h3>General</h3>
        <div class="card-row">
          <span class="card-row-label">Response style</span>
          <span class="card-row-value">Thoughtful & detailed</span>
        </div>
        <div class="card-row">
          <span class="card-row-label">Memory</span>
          <div class="toggle-track on" onclick="this.classList.toggle('on')"></div>
        </div>
        <div class="card-row">
          <span class="card-row-label">Sound notifications</span>
          <div class="toggle-track" onclick="this.classList.toggle('on')"></div>
        </div>
      </div>

      <div class="page-card">
        <h3>Appearance</h3>
        <div class="card-row">
          <span class="card-row-label">Theme</span>
          <span class="card-row-value">Light</span>
        </div>
        <div class="card-row">
          <span class="card-row-label">Compact messages</span>
          <div class="toggle-track" onclick="this.classList.toggle('on')"></div>
        </div>
      </div>

      <div class="page-card">
        <h3>Privacy</h3>
        <div class="card-row">
          <span class="card-row-label">Chat history</span>
          <div class="toggle-track on" onclick="this.classList.toggle('on')"></div>
        </div>
        <div class="card-row">
          <span class="card-row-label">Usage analytics</span>
          <div class="toggle-track on" onclick="this.classList.toggle('on')"></div>
        </div>
      </div>
    </div>

    <!-- CONNECTIONS PAGE -->
    <div class="page-view" id="page-connections">
      <h1>Connections</h1>
      <p class="page-subtitle">Manage the channels and services Aura can reach</p>

      <div class="connection-grid">
        <div class="connection-card connected">
          <div class="connection-icon">üí¨</div>
          <div class="connection-name">WhatsApp</div>
          <div class="connection-status">Connected</div>
        </div>
        <div class="connection-card connected">
          <div class="connection-icon">üîÆ</div>
          <div class="connection-name">Slack</div>
          <div class="connection-status">Connected</div>
        </div>
        <div class="connection-card connected">
          <div class="connection-icon">üéÆ</div>
          <div class="connection-name">Discord</div>
          <div class="connection-status">Connected</div>
        </div>
        <div class="connection-card">
          <div class="connection-icon">‚úàÔ∏è</div>
          <div class="connection-name">Telegram</div>
          <div class="connection-status">Not connected</div>
        </div>
        <div class="connection-card">
          <div class="connection-icon">üìß</div>
          <div class="connection-name">Email (IMAP)</div>
          <div class="connection-status">Not connected</div>
        </div>
        <div class="connection-card">
          <div class="connection-icon">üìÖ</div>
          <div class="connection-name">Google Calendar</div>
          <div class="connection-status">Not connected</div>
        </div>
        <div class="connection-card connected">
          <div class="connection-icon">üóÇÔ∏è</div>
          <div class="connection-name">Google Drive</div>
          <div class="connection-status">Connected</div>
        </div>
        <div class="connection-card connected">
          <div class="connection-icon">üß†</div>
          <div class="connection-name">Notion</div>
          <div class="connection-status">Connected</div>
        </div>
      </div>
    </div>

    <!-- CHAT VIEW -->
    <div id="chatView" style="display:flex; flex:1; min-width:0;">
      <!-- Chat panel (conversation history) -->
      <div class="chat-panel" id="chatPanel">
        <div class="panel-header">
          <span class="panel-title">Conversations</span>
          <button class="panel-toggle-btn" onclick="togglePanel()" title="Hide panel">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="11 17 6 12 11 7"/></svg>
          </button>
        </div>

        <button class="new-chat-btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
          New conversation
        </button>

        <div class="panel-section-label">Today</div>
        <div class="chat-list">
          <div class="chat-item active">
            <div class="dot"></div>
            <span>Morning planning session</span>
          </div>
          <div class="chat-item">
            <div class="dot"></div>
            <span>Recipe ideas for dinner</span>
          </div>
          <div class="chat-item">
            <div class="dot"></div>
            <span>Travel plans ‚Äî Lisbon trip</span>
          </div>
          <div class="chat-item">
            <div class="dot"></div>
            <span>Book recommendations</span>
          </div>
          <div class="chat-item">
            <div class="dot"></div>
            <span>Workout routine check-in</span>
          </div>
          <div class="panel-section-label" style="margin-top:14px">Yesterday</div>
          <div class="chat-item">
            <div class="dot"></div>
            <span>ClawdBot architecture review</span>
          </div>
          <div class="chat-item">
            <div class="dot"></div>
            <span>Tenant onboarding flow</span>
          </div>
          <div class="chat-item">
            <div class="dot"></div>
            <span>Weekly reflection</span>
          </div>
        </div>
      </div>

      <!-- Chat main -->
      <div class="chat-main">
        <div class="chat-header">
          <div class="header-left">
            <button class="panel-open-btn" onclick="togglePanel()" title="Show conversations">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="15" y2="12"/><line x1="3" y1="18" x2="18" y2="18"/></svg>
            </button>
            <div class="assistant-presence">
              <svg viewBox="0 0 24 24" fill="none" stroke="#FAF8F5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 3c-3.3 0-6 2.7-6 6 0 2.1 1.1 4 2.7 5.1C7.1 15.5 6 17.6 6 20h12c0-2.4-1.1-4.5-2.7-5.9C16.9 13 18 11.1 18 9c0-3.3-2.7-6-6-6z"/>
              </svg>
              <div class="presence-dot"></div>
            </div>
            <div class="header-info">
              <h2>Aura</h2>
              <p>Here whenever you need</p>
            </div>
          </div>
          <div class="header-actions">
            <button class="icon-btn" title="Search">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            </button>
            <button class="icon-btn" title="Options">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg>
            </button>
          </div>
        </div>

        <div class="messages-container" id="messagesContainer">
          <div class="welcome" id="welcomeState">
            <div class="welcome-orb"></div>
            <h1>Good afternoon, Ifeanyi</h1>
            <p>I'm here to help with whatever's on your mind ‚Äî no question too small, no thought too big.</p>
            <div class="suggestions">
              <button class="suggestion-chip" onclick="sendSuggestion(this)">
                <span class="chip-icon">‚ú¶</span> Help me plan my day
              </button>
              <button class="suggestion-chip" onclick="sendSuggestion(this)">
                <span class="chip-icon">‚óê</span> Think through a decision
              </button>
              <button class="suggestion-chip" onclick="sendSuggestion(this)">
                <span class="chip-icon">‚Üó</span> Draft an email for me
              </button>
              <button class="suggestion-chip" onclick="sendSuggestion(this)">
                <span class="chip-icon">‚òº</span> Surprise me
              </button>
            </div>
          </div>
        </div>

        <div class="input-area">
          <div class="input-wrapper">
            <textarea id="messageInput" placeholder="Ask me anything‚Ä¶" rows="1" oninput="autoResize(this)" onkeydown="handleKey(event)"></textarea>
            <div class="input-actions">
              <button class="attach-btn" title="Attach file">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"/></svg>
              </button>
              <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                <svg viewBox="0 0 24 24" fill="none" stroke="#FAF8F5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
              </button>
            </div>
          </div>
          <div class="input-hint">Aura remembers context across your conversations</div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const messagesContainer = document.getElementById('messagesContainer');
  const messageInput = document.getElementById('messageInput');
  const sendBtn = document.getElementById('sendBtn');
  const welcomeState = document.getElementById('welcomeState');
  const appNav = document.getElementById('appNav');
  const chatPanel = document.getElementById('chatPanel');
  const chatView = document.getElementById('chatView');

  let conversationStarted = false;

  // === NAVIGATION ===
  function navigateTo(page) {
    // Update nav active state
    document.querySelectorAll('.nav-item').forEach(item => {
      item.classList.toggle('active', item.dataset.page === page);
    });

    // Hide all page views
    document.querySelectorAll('.page-view').forEach(v => v.classList.remove('active'));
    chatView.style.display = 'none';

    if (page === 'chat') {
      chatView.style.display = 'flex';
      setTimeout(() => messageInput.focus(), 100);
    } else {
      const el = document.getElementById('page-' + page);
      if (el) {
        // Re-trigger staggered entrance animations
        const children = el.children;
        for (let i = 0; i < children.length; i++) {
          children[i].style.animation = 'none';
          children[i].offsetHeight; // force reflow
          children[i].style.animation = '';
        }
        el.classList.add('active');
      }
    }
  }

  function toggleNav() {
    appNav.classList.toggle('collapsed');
  }

  function togglePanel() {
    chatPanel.classList.toggle('hidden');
  }

  // === CHAT ===
  function autoResize(el) {
    el.style.height = 'auto';
    el.style.height = Math.min(el.scrollHeight, 120) + 'px';
    sendBtn.classList.toggle('active', el.value.trim().length > 0);
  }

  function handleKey(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      sendMessage();
    }
  }

  function getTime() {
    return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
  }

  function esc(text) {
    const d = document.createElement('div');
    d.textContent = text;
    return d.innerHTML;
  }

  function sendSuggestion(chip) {
    const text = chip.textContent.trim().replace(/^[‚ú¶‚óê‚Üó‚òº]\s*/, '');
    messageInput.value = text;
    sendMessage();
  }

  function sendMessage() {
    const text = messageInput.value.trim();
    if (!text) return;

    if (!conversationStarted) {
      welcomeState.style.display = 'none';
      conversationStarted = true;
    }

    const userMsg = document.createElement('div');
    userMsg.className = 'message-group user';
    userMsg.innerHTML = `
      <div class="msg-avatar user-av">I</div>
      <div class="msg-content">
        <div class="msg-bubble user-msg">${esc(text)}</div>
        <div class="msg-time">${getTime()}</div>
      </div>`;
    messagesContainer.appendChild(userMsg);

    messageInput.value = '';
    messageInput.style.height = 'auto';
    sendBtn.classList.remove('active');
    scrollBottom();

    setTimeout(() => {
      const typing = document.createElement('div');
      typing.className = 'typing-indicator';
      typing.id = 'typingIndicator';
      typing.innerHTML = `
        <div class="msg-avatar assistant-av">
          <svg viewBox="0 0 24 24" fill="none" stroke="#FAF8F5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3c-3.3 0-6 2.7-6 6 0 2.1 1.1 4 2.7 5.1C7.1 15.5 6 17.6 6 20h12c0-2.4-1.1-4.5-2.7-5.9C16.9 13 18 11.1 18 9c0-3.3-2.7-6-6-6z"/></svg>
        </div>
        <div class="typing-dots"><span></span><span></span><span></span></div>`;
      messagesContainer.appendChild(typing);
      scrollBottom();

      setTimeout(() => {
        typing.remove();
        addAssistantMsg(getResponse(text));
      }, 1200 + Math.random() * 800);
    }, 350);
  }

  function addAssistantMsg(text) {
    const msg = document.createElement('div');
    msg.className = 'message-group';
    msg.innerHTML = `
      <div class="msg-avatar assistant-av">
        <svg viewBox="0 0 24 24" fill="none" stroke="#FAF8F5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3c-3.3 0-6 2.7-6 6 0 2.1 1.1 4 2.7 5.1C7.1 15.5 6 17.6 6 20h12c0-2.4-1.1-4.5-2.7-5.9C16.9 13 18 11.1 18 9c0-3.3-2.7-6-6-6z"/></svg>
      </div>
      <div class="msg-content">
        <div class="msg-bubble assistant-msg">${text}</div>
        <div class="msg-time">${getTime()}</div>
        <div class="msg-actions">
          <button class="msg-action-btn" title="Copy"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg></button>
          <button class="msg-action-btn" title="Like"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M14 9V5a3 3 0 00-3-3l-4 9v11h11.28a2 2 0 002-1.7l1.38-9a2 2 0 00-2-2.3H14z"/><path d="M7 22H4a2 2 0 01-2-2v-7a2 2 0 012-2h3"/></svg></button>
        </div>
      </div>`;
    messagesContainer.appendChild(msg);
    scrollBottom();
  }

  function getResponse(input) {
    const l = input.toLowerCase();
    if (l.includes('plan') && l.includes('day')) return "I'd love to help you shape your day. Let's start with the essentials ‚Äî what are the one or two things that, if you accomplished them today, would make you feel genuinely good by evening? We can build everything else around those.";
    if (l.includes('think') || l.includes('decide') || l.includes('decision')) return "I'm all ears. Sometimes just putting thoughts into words can bring surprising clarity. What's weighing on your mind? Take your time ‚Äî there's no rush here.";
    if (l.includes('email') || l.includes('draft')) return "Happy to help you craft that. Tell me a bit about who it's for and what you'd like to communicate ‚Äî I'll make sure the tone feels just right.";
    if (l.includes('surprise')) return "Here's something beautiful: the Japanese concept of <em>komorebi</em> ‚Äî the interplay of light and leaves when sunlight filters through trees. There's no single English word for it, yet it describes something we've all felt. Sometimes the most universal experiences are the ones no one thought to name.";
    return "That's a thoughtful question. Let me give that the attention it deserves ‚Äî I want to make sure my response is genuinely useful to you, not just quick.";
  }

  function scrollBottom() {
    messagesContainer.scrollTo({ top: messagesContainer.scrollHeight, behavior: 'smooth' });
  }

  // Init: show chat view
  navigateTo('chat');
  setTimeout(() => messageInput.focus(), 600);
</script>

</body>
</html>
